<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- report_invoice_document -->

    <!-- TODO:  aplicar este cambio en report_invoice_document para que el Monto Pagado tenga color
    blanco 
 <t t-if="len(payments_vals) &gt; 0">
        <tr >
            <td ><strong  style="color: white !important;">Amount Due</strong></td>
            <td class="text-right">
                <span  style="color: white !important;" t-field="o.amount_residual"/>
            </td>
        </tr>
    </t>

 -->


    <template id="account.document_tax_totals">
        <t>
            <tr class="border-black o_subtotal" style="border: 0px solid !important">
                <td style="padding-left: 20px; border: 0px solid !important">
                    <span> Pago adicional a las Cargas</span>
                </td>
                <td class="text-right" style="border: 0px solid !important">
                    <span t-field="o.subtotal_internal_loads_additional"
                        t-options="{'widget': 'monetary', 'display_currency': o.currency_id}" />
                </td>
            </tr>
        </t>


        <t>
            <tr class="border-black o_subtotal" style="border: 0px solid !important">
                <td style="padding-left: 20px; border: 0px solid !important">
                    <span> Descuentos a las cargas</span>
                </td>
                <td class="text-right" style="border: 0px solid !important">
                    <span t-field="o.subtotal_internal_loads_discount"
                        t-options="{'widget': 'monetary', 'display_currency': o.currency_id}" />
                </td>
            </tr>
        </t>

        <tr class="border-black o_subtotal"
            style="border-bottom: 1px solid #df0303; border-top: 0px solid !important;"
        >
            <td style="border: 0px solid !important">
                <t t-if="o.move_type in ('in_invoice')">
                    <strong>Subtotal después de pagos y descuentos de las cargas</strong>
                </t>
                <t t-else="">
                    <strong>Subtotal de las cargas</strong>
                </t>
            </td>
            <td class="text-right" style="border: 0px solid !important">
                <span t-field="o.subtotal_internal_loads_subtotal"
                    t-options="{'widget': 'monetary', 'display_currency': o.currency_id}" />
            </td>
        </tr>


        <t t-if="o.move_type in ('in_invoice')">

            <tr style="border: 0px solid !important; border-bottom: 1px solid black">

                <td style="color: white; border: 0px solid !important">.</td>
            </tr>


            <t t-foreach="o.discounts_totals['details']" t-as="discount">
                <tr style="border: 0px solid !important">
                    <td style="padding-left: 20px; border: 0px solid !important">

                        <span t-esc="discount['name']" />
                    </td>
                    <td class="text-right" style="border: 0px solid !important">
                        <span t-att-class="oe_subtotal_footer_separator"
                            t-esc="discount['price_subtotal']"
                            t-options="{'widget': 'monetary', 'display_currency': o.currency_id}" />
                    </td>
                </tr>
            </t>
            <tr class="border-black o_subtotal"
                style="border-bottom: 1px solid #df0303; border-top: 0px solid !important;">
                <td style="border: 0px solid !important">
                    <strong>Subtotal después de descuentos internos</strong>
                </td>

                <td class="text-right" style="border: 0px solid !important">
                    <!-- <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
                        <t t-if="subtotal['name'] == 'Base imponible'">
                            <span t-att-class="oe_subtotal_footer_separator"
                                t-esc="subtotal['amount'] + o.subtotal_internal_discounts"
                                t-options="{'widget': 'monetary', 'display_currency': o.currency_id}" />
                        </t>
                    </t> -->


                    <t>
                        <span t-att-class="oe_subtotal_footer_separator"
                            t-esc="o.subtotal_internal_loads_subtotal + o.subtotal_internal_discounts"
                            t-options="{'widget': 'monetary', 'display_currency': o.currency_id}" />

                    </t>


                </td>

            </tr>


            <!--
                Generic template to display tax totals in pdf reports.
                Used by invoices, SO and PO.

                ARGUMENTS:
                - tax_totals: dict in the form generated by account.move's _get_tax_totals.
            -->


            <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
                <t t-set="subtotal_to_show" t-value="subtotal['name']" />
                <t t-call="account.tax_groups_totals" />

                <tr class="border-black o_subtotal"
                    style="border-bottom: 1px solid #df0303; border-top: 0px solid !important;">

                    <t t-if="subtotal['name'] == 'Base imponible'">
                        <td style="border: 0px solid !important">
                            <strong>Subtotal después de impuestos</strong>
                        </td>
                    </t>
                    <t t-if="subtotal['name'] != 'Base imponible'">
                        <td style="border: 0px solid !important">
                            <span t-esc="subtotal['name']" />
                        </td>
                    </t>

                    <td class="text-right" style="border: 0px solid !important">
                        <span t-att-class="oe_subtotal_footer_separator"
                            t-esc="subtotal['formatted_amount']" />
                    </td>
                </tr>


            </t>


            <tr style="border: 0px solid !important">

                <td style="color: white; border: 0px solid !important">.</td>
            </tr>


            <tr style="border: 0px solid !important">

                <td style="color: white; border: 0px solid !important">.</td>
            </tr>
            <tr class="border-black o_subtotal"
                style="border-bottom: 1px solid #df0303; border-top: 0px solid !important;">
                <td style="border: 0px solid !important">
                    <strong>Total a pagar...</strong>
                </td>
                <td class="text-right" style="border: 0px solid !important">
                    <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
                        <t t-if="subtotal['name'] == 'Base imponible'">
                            <span t-att-class="oe_subtotal_footer_separator"
                                t-esc="subtotal['amount'] + o.subtotal_internal_discounts"
                                t-options="{'widget': 'monetary', 'display_currency': o.currency_id}" />
                        </t>
                    </t>
                </td>
            </tr>

            <tr style="border: 0px solid !important; border-bottom: 1px solid black">

                <td style="color: white; border: 0px solid !important">.</td>
            </tr>


            <t>
                <tr class="border-black o_subtotal" style="border: 0px solid !important">
                    <td style="border: 0px solid !important">
                        <strong style="color: white !important;">Total después de pago(s)</strong>
                    </td>
                    <td class="text-right" style="border: 0px solid !important">
                        <strong style="color: white !important;">
                            <span t-field="o.amount_residual" />
                        </strong>
                    </td>
                </tr>
            </t>
        </t>
        <t t-else="">
            <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
                <tr class="border-black o_subtotal">
                    <td>
                        <strong t-esc="subtotal['name']" />
                    </td>

                    <td class="text-right">
                        <span t-att-class="oe_subtotal_footer_separator"
                            t-esc="subtotal['formatted_amount']" />
                    </td>
                </tr>

                <t t-set="subtotal_to_show" t-value="subtotal['name']" />
                <t t-call="account.tax_groups_totals" />
            </t>

            <!--Total
            amount with all taxes-->
            <tr class="border-black o_total">
                <td>
                    <strong>Total</strong>
                </td>
                <td class="text-right">
                    <span t-esc="tax_totals['formatted_amount_total']" />
                </td>
            </tr>
        </t>
    </template>
</odoo>
<!-- 
    
 -->